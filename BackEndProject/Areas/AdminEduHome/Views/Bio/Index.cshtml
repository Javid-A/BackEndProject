@model Bio
@{
	ViewData["Title"] = "Index";
}

<div>
	<div class="row justify-content-between">
		<div>
			<h4>Logo</h4>
			<img src="~/img/logo/@Model.LogoPath" width="150" alt="Alternate Text" />
		</div>
		<!-- Button trigger modal -->
		<button type="button" id="editBtn" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">
			Edit
		</button>

		<!-- Modal -->
		<div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<form method="post" id="form">
							<h4 style="margin-top:30px" class="card-title">Logo</h4>
							<input type="file" id="logo" name="inputLogo" class="form-control" accept="image/*">
							<span class="text-danger"></span>

							<h4 style="margin-top:30px" class="card-title">About Photo</h4>
							<input type="file" id="about" name="inputAbout" class="form-control" accept="image/*">
							<span class="text-danger"></span>

							<h4 style="margin-top:30px" class="card-title">About</h4>
							<textarea asp-for="About" style="width:100%;height:100px">@Model.About</textarea>
							<span asp-validation-for="About" class="text text-danger"></span>

							<h4 style="margin-top:30px" class="card-title">Video</h4>
							<input asp-for="Video" value="@Model.Video" style="width:100%" />
							<span asp-validation-for="Video" id="videoError" class="text text-danger"></span>


							<h4 style="margin-top:30px" class="card-title">Phone Number</h4>
							<input asp-for="PhoneNumber" value="@Model.PhoneNumber" style="width:100%" />

							<h4 style="margin-top:30px" class="card-title">Phone Number(2)</h4>
							<input asp-for="PhoneNumber2" value="@Model.PhoneNumber2" style="width:100%" />

							<h4 style="margin-top:30px" class="card-title">Address</h4>
							<input asp-for="Address" value="@Model.Address" style="width:100%" />

							<h4 style="margin-top:30px" class="card-title">Email</h4>
							<input asp-for="Email" value="@Model.Email" style="width:100%" />

							<h4 style="margin-top:30px" class="card-title">Link</h4>
							<input asp-for="Link" value="@Model.Link" style="width:100%" />
							<div class="modal-footer">
								<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
								<button type="submit" id="saveChanges" class="btn btn-primary">Save changes</button>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>
	</div>
	<div style="margin-top:40px">
		<h4>About Photo</h4>
		<img src="~/img/about/@Model.AboutPath" width="300" alt="Alternate Text" />
	</div>
	<div style="margin-top:40px">
		<h4>Video Link</h4>
		<a href="@Model.Video" target="_blank">@Model.Video</a>
	</div>
	<div style="margin-top:40px">
		<h4>About</h4>
		<p>@Html.Raw(Model.About)</p>
	</div>
	<div style="margin-top:40px">
		<h4>Phone Number</h4>
		<p>@Model.PhoneNumber</p>
	</div>
	<div style="margin-top:40px">
		<h4>Phone Number(2)</h4>
		<p>@Model.PhoneNumber2</p>
	</div>
	<div style="margin-top:40px">
		<h4>Email</h4>
		<p>@Model.Email</p>
	</div>
	<div style="margin-top:40px">
		<h4>Address</h4>
		<p>@Model.Address</p>
	</div>
	<div style="margin-top:40px">
		<h4>Link</h4>
		<p>@Model.Link</p>
	</div>
</div>

@section Scripts{
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.11/jquery.validate.unobtrusive.min.js"></script>
	@*<script src="https://cdn.ckeditor.com/ckeditor5/20.0.0/classic/ckeditor.js"></script>
	<script>
		ClassicEditor
			.create(document.querySelector('.ckeditor'))
			.catch(error => {
				console.error(error);
			});
	</script>*@
	<script>
		let logo = document.getElementById("logo")
		let about = document.getElementById("about")
		let logoPath = "";
		let aboutPath = "";
		logo.onchange = function (e) {
			logoPath = e.target.files[0].name;
		}
		about.onchange = function (e) {
			aboutPath = e.target.files[0].name;
		}
		$("#saveChanges").click(function (e) {
			$("#form").submit(function (e) {
				e.preventDefault();
			})
			let text = $("#Video").val();
			let aboutText = $("#About").val();
			let error = $("#videoError").text();
			if (error == "" && text.trim() != "" && aboutText.trim() != "" ) {
				$.ajax({
					url: "/AdminEduHome/Bio/SaveChanges",
					data: { 'logoPath': logoPath, 'aboutPath': aboutPath },
					type: "Get",
					success: function (res) {
						console.log(res)
					}
				})
			}
		})
	</script>
}
